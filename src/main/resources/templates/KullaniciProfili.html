<!DOCTYPE html>
<html lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1,  maximum-scale-2, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>U-ETDS | Kullanıcı Bilgileri</title>

    <link rel="stylesheet" th:href="@{/css/pace.min.css}"/>
    <script th:src="@{/js/pace.min.js}"></script>
    <!--favicon-->
    <link rel="icon" th:href="@{/images/favicon.ico}" type="image/x-icon">
    <!-- simplebar CSS-->
    <link th:href="@{/plugins/simplebar/css/simplebar.css}" rel="stylesheet"/>
    <!-- Bootstrap core CSS-->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <!-- animate CSS-->
    <link th:href="@{/css/animate.css}" rel="stylesheet" type="text/css"/>
    <!-- Icons CSS-->
    <link th:href="@{/css/icons.css}" rel="stylesheet" type="text/css"/>
    <!-- Sidebar CSS-->
    <link th:href="@{/css/sidebar-menu.css}" rel="stylesheet"/>
    <!-- Custom Style-->
    <link th:href="@{/css/app-style.css}" rel="stylesheet"/>
    <!-- skins CSS-->
    <link th:href="@{/css/skins.css}" rel="stylesheet"/>
    <style>
        .pass_show{position: relative}

        .pass_show .ptxt {

            position: absolute;

            top: 50%;

            right: 40px;

            z-index: 1;

            color: #7934f3;

            margin-top: -10px;

            cursor: pointer;

            transition: .3s ease all;

        }

        .pass_show .ptxt:hover{color: #333333;}
    </style>
</head>

<body>

<!-- Start wrapper-->
<div id="wrapper">

<!--Start sidebar-topbar-wrapper-->
<div th:replace="SideBar :: navbar"/>
<!--End sidebar-topbar-wrapper-->


    <div id="loading-screen" style="display: none; background-color: white">
        <div class='loader'>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--dot'></div>
            <div class='loader--text'></div>
        </div>
    </div>

    <div class="clearfix"></div>

    <div class="content-wrapper">
        <div class="container-fluid">
            <!-- Breadcrumb-->
            <div class="row pt-2 pb-2">
                <div class="col-sm-9">
                    <h4 class="page-title"> Kullanıcı Bilgileri</h4>
                </div>
                <div class="col-sm-3">
                    <div class="btn-group float-sm-right m-1" role="group">
                        <button type="button" class="btn btn-light dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Hızlı Erişim
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" style="font-size: small; background-color: rgba(129, 90, 232, 0.15);">Teknik Destek</a>
                            <a href="/teknikdestek/olustur" class="dropdown-item text-center" style="font-size: small" >Teknik Destek Talebi</a>
                            <a href="/teknikdestek/taleplerim" class="dropdown-item text-right" style="font-size: small">&emsp;&emsp;Teknik Destek Taleplerim</a>
                            <a class="dropdown-item " style="font-size: small; background-color: rgba(129, 90, 232, 0.15);">Öneri / Şikayetleriniz</a>
                            <a href="/oneri/olustur" class="dropdown-item text-center" style="font-size: small">Öneri / Şikayet Talebi</a>
                            <a href="/oneri/onerilerim" class="dropdown-item pull-right" style="font-size: small">&emsp;&emsp;Öneri / Şikayet Taleplerim</a>
                            <div class="dropdown-divider"></div>
                            <a href="/iletisim/iletisim" class="dropdown-item">İletişim</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Breadcrumb-->

            <div class="row">
                <div class="col-lg-4">
                    <div class="card profile-card-2">
                        <div class="card-img-block">
                            <img class="img-fluid" th:src="@{/images/gallery/danisman.jpg}" alt="Card image cap">
                        </div>
                        <div class="card-body pt-5">
                            <img th:src="@{/images/gallery/avatar.png}" alt="profile-image" class="profile">
                            <h5 class="card-title"><span sec:authentication="name"></span></h5>
                            <p class="card-text"></p>

                        </div>

                        <div class="card-body border-top border-light">
                            <div class="media align-items-center">
                                <div><img th:src="@{/images/timeline/refer.png}" class="skill-img" alt="skill img"></div>
                                <div class="media-body text-left ml-3" data-toggle="tooltip" data-placement="bottom" title="Paket Kullanım Süreleri 1 Yıldır. Kullanım Süreniz Bitmeden Yenileyiniz...">
                                    <div class="progress-wrapper">
                                        <p>Paket Yenilenme Tarihi <span class="float-right" th:text="${updateDate}"> </span></p>
                                        <div class="progress" style="height: 5px;">
                                            <div class="progress-bar gradient-ibiza" style="width:100%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                        </div>
                    </div>
                </div>

                <div class="col-lg-8" th:object="${user}">
                    <div class="card">
                        <div class="card-body">
                            <ul class="nav nav-tabs nav-tabs-primary top-icon top nav-justified">
                                <li class="nav-item">
                                    <a href="Javascript:void(0);" data-target="#profile" data-toggle="pill" class="nav-link active"><i class="zmdi zmdi-account"></i> <span class="hidden-xs">Kullanıcı Profili</span></a>
                                </li>
<!--                                <li class="nav-item">-->
<!--                                    <a href="javascript:void(0);" data-target="#messages" data-toggle="pill" class="nav-link"><i class="fa fa-money"></i> <span class="hidden-xs">Son Kazançlar</span></a>-->
<!--                                </li>-->
                                <li class="nav-item">
                                    <a href="javascript:void(0);" data-target="#edit" data-toggle="pill" class="nav-link"><i class="zmdi zmdi-labels"></i> <span class="hidden-xs">Bilgi Değişikliği</span></a>
                                </li>
                            </ul>
                            <div class="tab-content p-3">
                                <div class="tab-pane active" id="profile">
                                    <div class="row">
                                        <div class="col-lg-12 row">
                                            <label class="col-lg-3 col-form-label form-control-label">Firma Adı</label>
                                            <div class="col-lg-9">
                                                <input class="form-control form-control-sm" th:value="${user.getFirmaBilgileri().getFirmaAdi()}" placeholder="Firmanızın Adını Giriniz" readonly>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 row">
                                            <label class="col-lg-3 col-form-label form-control-label">E-mail</label>
                                            <div class="col-lg-9">
                                                <input class="form-control form-control-sm" th:value="${user.email}" readonly>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 row">
                                            <label class="col-lg-3 col-form-label form-control-label">Adres</label>
                                            <div class="col-lg-9">
                                               <h5 class="form-control" th:text="${user.adres}"></h5>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 row">
                                            <label class="col-lg-3 col-form-label form-control-label">İl/İlçe</label>
                                            <div class="col-lg-9">
                                                <h5 class="form-control" th:text="${user.adres}"></h5>
                                            </div>
                                        </div>
                                        <hr>
<!--                                        <div class="col-md-12">-->
<!--                                            <h5 class="mt-2 mb-3"><span class="fa fa-clock-o ion-clock float-right"></span>Son Referans Olunan Firmalar</h5>-->
<!--                                            <div class="table-responsive">-->
<!--                                                <table class="table table-hover table-striped">-->
<!--                                                    <tbody>-->
<!--                                                    <tr>-->
<!--                                                        <td>-->
<!--                                                            <strong>Mahmut Nakliye LTD. ŞTİ.</strong> Danışman koduyla sisteme kaydoldu. <strong>REF123124214</strong>-->
<!--                                                        </td>-->
<!--                                                    </tr>-->
<!--                                                    <tr>-->
<!--                                                        <td>-->
<!--                                                            <strong>Cafer Nakliye LTD. ŞTİ.</strong> Danışman koduyla sisteme kaydoldu. <strong>REF123124214</strong>-->
<!--                                                        </td>-->
<!--                                                    </tr>-->
<!--                                                    <tr>-->
<!--                                                        <td>-->
<!--                                                            <strong>Nuri Nakliye LTD. ŞTİ.</strong> Danışman koduyla sisteme kaydoldu. <strong>REF123124214</strong>-->
<!--                                                        </td>-->
<!--                                                    </tr>-->
<!--                                                    <tr>-->
<!--                                                        <td>-->
<!--                                                            <strong>Sencer Nakliye LTD. ŞTİ.</strong> Danışman koduyla sisteme kaydoldu. <strong>REF123124214</strong>-->
<!--                                                        </td>-->
<!--                                                    </tr>-->
<!--                                                    <tr>-->
<!--                                                        <td>-->
<!--                                                            <strong>Toroman Nakliye LTD. ŞTİ.</strong> Danışman koduyla sisteme kaydoldu. <strong>REF123124214</strong>-->
<!--                                                        </td>-->
<!--                                                    </tr>-->
<!--                                                    </tbody>-->
<!--                                                </table>-->
<!--                                            </div>-->
<!--                                        </div>-->
                                    </div>
                                    <!--/row-->
                                </div>
<!--                                <div class="tab-pane" id="messages">-->
<!--                                    <div class="alert alert-info alert-dismissible" role="alert">-->
<!--                                        <button type="button" class="close" data-dismiss="alert">&times;</button>-->
<!--                                        <div class="alert-icon">-->
<!--                                            <i class="zmdi zmdi zmdi-alert-circle-o"></i>-->
<!--                                        </div>-->
<!--                                        <div class="alert-message">-->
<!--                                            <span><strong>Bilgi!    </strong> Ödemeler aylık olarak yansımaktadır.</span>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="table-responsive">-->
<!--                                        <table class="table table-hover table-striped">-->
<!--                                            <tbody>-->
<!--                                            <tr>-->
<!--                                                <td>-->
<!--                                                    <span class="float-right font-weight-bold">3 Saat Önce</span>Tein Yazılım A.Ş'den Gelen Referans Ücretiniz Hesabınıza Yatmıştır.-->
<!--                                                </td>-->
<!--                                            </tr>-->
<!--                                            <tr>-->
<!--                                                <td>-->
<!--                                                    <span class="float-right font-weight-bold">Dün</span> Tein Yazılım A.Ş'den Gelen Referans Ücretiniz Hesabınıza Yatmıştır.-->
<!--                                                </td>-->
<!--                                            </tr>-->
<!--                                            <tr>-->
<!--                                                <td>-->
<!--                                                    <span class="float-right font-weight-bold">9/10</span> Tein Yazılım A.Ş'den Gelen Referans Ücretiniz Hesabınıza Yatmıştır.-->
<!--                                                </td>-->
<!--                                            </tr>-->
<!--                                            <tr>-->
<!--                                                <td>-->
<!--                                                    <span class="float-right font-weight-bold">9/4</span> Tein Yazılım A.Ş'den Gelen Referans Ücretiniz Hesabınıza Yatmıştır.-->
<!--                                                </td>-->
<!--                                            </tr>-->
<!--                                            <tr>-->
<!--                                                <td>-->
<!--                                                    <span class="float-right font-weight-bold">9/4</span> Tein Yazılım A.Ş'den Gelen Referans Ücretiniz Hesabınıza Yatmıştır.-->
<!--                                                </td>-->
<!--                                            </tr>-->
<!--                                            </tbody>-->
<!--                                        </table>-->
<!--                                    </div>-->
<!--                                </div>-->
                                <div class="tab-pane" id="edit">
                                    <form>
                                        <div class="form-group row">
                                            <label class="col-lg-3 col-form-label form-control-label">Firma Adı</label>
                                            <div class="col-lg-9">
                                                <input type="text" class="form-control"
                                                       id="firmaAdi" name="firmaAdi" th:value="${user.getFirmaAdi()}" placeholder="Firmanızın Adını Giriniz" required>
                                            </div>
                                        </div>
<!--                                        <div class="form-group row">-->
<!--                                            <label class="col-lg-3 col-form-label form-control-label">Kullanıcı Adı</label>-->
<!--                                            <div class="col-lg-9">-->
<!--                                                <input  type="text" th:value="${user.ad}" class="form-control" id="userad"-->
<!--                                                        name="userad"-->
<!--                                                        placeholder="Kullanıcı Adınızı Giriniz" required>-->
<!--                                            </div>-->
<!--                                        </div>-->
                                        <div class="form-group row">
                                            <label class="col-lg-3 col-form-label form-control-label">E-mail</label>
                                            <div class="col-lg-9">
                                                <input class="form-control" id="email" name="email" th:value="${user.email}">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-lg-3 col-form-label form-control-label">Profil Resmi Ekle</label>
                                            <div class="col-lg-9">
                                                <input class="form-control" type="file">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-lg-3 col-form-label form-control-label">Adres</label>
                                            <div class="col-lg-9">
                                               <textarea rows="3" class="form-control" id="adresAcikla" name="adresAcikla" th:text="${user.adres}"
                                                         required></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-lg-3 col-form-label form-control-label">İl/İlçe</label>
                                            <div class="col-md-9">
                                                    <select class="form-control" name="" id="selectCity" >
                                                        <option disabled="disabled" selected="selected"> ----- İl
                                                            Seçiniz -----
                                                        </option>
                                                        <option th:each="city : ${citys}" th:value="${city.id}"
                                                                th:text="${city.il}" th:selected="${city.id} == ${user.il}"
                                                        ></option>
                                                    </select>
                                                    <select class="form-control" name="" id="selectDistrict" >
        <!--                                                    <option  th:each="ilce: ${user.ilce}" th:value="${ilce.id}" th:text="${user.ilce}",-->
        <!--                                                             th:selected="${user.ilce.id} == ${user.il.ilce.id}">-->
        <!--                                                    </option>-->
                                                    </select>
                                            </div>
                                        </div>
                                        <hr>
                                        <h4><center>Şifre Değiştir</center></h4>
                                        <div class="form-group row">
                                            <label class="col-lg-3 col-form-label form-control-label">Geçerli Şifre</label>
                                            <div class="col-md-9 pass_show">
                                                <input class="form-control" id="gecerliSifre" onfocus="this.value=''" type="password" value="11111122333" maxlength="25">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-lg-3 col-form-label form-control-label">Şifre</label>
                                            <div class="col-md-9 pass_show">
                                                <input class="form-control" id="newpass" onfocus="this.value=''" type="password" value="11111122333" maxlength="25">
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <label class="col-lg-3 col-form-label form-control-label">Şifreniz Tekrar</label>
                                            <div class="col-md-9 pass_show">
                                                <input class="form-control" id="newpass2"  onfocus="this.value=''" type="password" value="11111122333" maxlength="25">
                                            </div>
                                        </div>
                                        <div class="col-lg-12">
                                            <label class="col-lg-12"></label>
                                            <div class="col-lg-3 pull-right">
                                            <div>
                                                <input type="reset" class="btn btn-secondary" value="İptal">
                                                <input type="button" class="btn btn-primary" id="kaydet" value="Kaydet">
                                            </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
   <!--End Row-->
                <!--start overlay-->
                <div class="overlay toggle-menu"></div>
                <!--end overlay-->
            </div>
            <!-- End container-fluid-->

        </div><!--End content-wrapper-->
        <!--Start Back To Top Button-->
        <a href="javaScript:void(0);" class="back-to-top"><i class="fa fa-angle-double-up"></i> </a>
        <!--End Back To Top Button-->

    </div><!--End wrapper-->





    <!-- Bootstrap core JavaScript-->
    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/popper.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>

    <!-- simplebar js -->
    <script th:src="@{/plugins/simplebar/js/simplebar.js}"></script>
    <!-- sidebar-menu js -->
    <script th:src="@{/js/sidebar-menu.js}"></script>


    <!-- Custom scripts -->
    <script th:src="@{/js/app-script.js}"></script>
    <script th:src="@{/plugins/notifications/js/lobibox.min.js}"></script>
    <script th:src="@{/plugins/notifications/js/notifications.min.js}"></script>
    <script th:src="@{/plugins/notifications/js/notification-custom-script.js}"></script>

    <!--Form Validatin Script-->
    <script th:src="@{/plugins/jquery-validation/js/jquery.validate.min.js}"></script>
<script>
    $("#newpass").change(function() {
        if ($("#newpass").val() === $("#newpass2").val()){
            document.getElementById("kaydet").disabled = false;
        }else{
            document.getElementById("kaydet").disabled = true;
        }
    })
    $("#newpass2").change(function() {
        if ($("#newpass").val() === $("#newpass2").val()){
            document.getElementById("kaydet").disabled = false;
        }else{
            document.getElementById("kaydet").disabled = true;
        }
    })
</script>
<script>
$(document).ready(function() {
    var hhh = 0;
    document.getElementById("newpass").disabled = true;
    document.getElementById("newpass2").disabled = true;

    $("#gecerliSifre").change(function() {
        if (hhh === 0 ){
            document.getElementById("newpass").disabled = false;
            document.getElementById("newpass2").disabled = false;
            $('.pass_show').append('<span class="ptxt">Göster</span>');
            hhh=1;
        }
    });

    $(document).on('click','.pass_show .ptxt', function(){

        $(this).text($(this).text() == "Göster" ? "Gizle" : "Göster ");

        $(this).prev().attr('type', function(index, attr){return attr == 'password' ? 'text' : 'password'; });

    });
});
</script>
<script>
        $("#selectCity").change(function() {
            var cityId = this.value;
            console.log(cityId)
            $.ajax({
                url: "/getilceByIlId/"+cityId,
                type: "get",
                //data: {ulkeId: cityId},
                success: function (response) {

                    $('#selectDistrict').find('option').remove().end().append('<option disabled selected> ----- İlçe Seçiniz ----- </option>').val('');

                    var i;
                    for (i = 0; i < response.length; ++i) {
                        $('#selectDistrict').append(new Option( response[i].ilce,response[i].ilceMernisKod));
                    }

                    $("#selectDistrict").val($("#selectDistrict option:first").val());

                },
                error: function(jqXHR, textStatus, errorThrown) {

                }
            });
        });
</script>
</body>
</html>
